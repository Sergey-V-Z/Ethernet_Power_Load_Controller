## Подробные спецификации сообщений

### 1. Сообщение настроек IP
```json
{
    "id": 1,
    "name_device": "pwr controller",
    "type_data": 1,
    "obj": {
        "IP": "",
        "MAC": "",
        "GATEWAY": "",
        "MASK": "",
        "DNS": "",
        "DHCP": false,
        "version": null
    }
}
```

### 2. Сообщение настроек каналов
```json
{
    "id": 1,
    "name_device": "pwr controller",
    "type_data": 2,
    "obj_ch": [
        {
            "num": 0,
            "dev_addr": 1,
            "ch_dev": 0,
            "PWM": 0
        }
        // ... дополнительные каналы
    ]
}
```

### 3. Команды

#### Команда автоматической настройки
```json
{
    "type_data": 3,
    "obj": {
        "id_cmd": 1,
        "Addr_start": 1,
        "Count_dev": 4
    }
}
```

#### Команда добавления устройства
```json
{
    "type_data": 3,
    "obj": {
        "id_cmd": 2,
        "Num": 1,
        "Dev_addr": 1,
        "CH_dev": 1
    }
}
```

#### Команда управления каналом
```json
{
    "type_data": 3,
    "obj": {
        "id_cmd": 4,
        "Num": 1,
        "PWM": 1000,
        "On": true,
        "All": false
    }
}
```

## Примечания по реализации

1. **Конфигурация IP**
   - Поддержка как DHCP, так и статической IP-конфигурации
   - Включает полную конфигурацию сети (IP, шлюз, маска, DNS)
   - MAC-адрес может быть настроен при необходимости

2. **Управление каналами**
   - Поддержка до 6 каналов (0-5)
   - Каждый канал имеет независимое управление ШИМ
   - Каналы организованы по адресу устройства и номеру канала

3. **Система команд**
   - Гибкая структура команд для управления устройством
   - Поддержка как индивидуальных, так и групповых операций
   - Включает системные команды (перезагрузка, автоконфигурация)

4. **Настройки моста**
   - Настраиваемый порт (по умолчанию: 502)
   - Поддержка различных режимов работы

## Рекомендации по безопасности

1. Обеспечение надлежащей сетевой безопасности при настройке IP
2. Проверка всех параметров команд перед отправкой
3. Рассмотрение внедрения контроля доступа для критических команд
4. Мониторинг и регистрация важных системных изменений

## Обработка ошибок

Система должна обрабатывать следующие сценарии:
- Ошибки конфигурации сети
- Недопустимые номера каналов
- Ошибки проверки команд
- Таймауты связи с устройством

## Руководство по интеграции

1. **Начальная настройка**
   - Сначала настройка сетевых параметров
   - Проверка связи с устройством
   - Настройка необходимых каналов

2. **Штатная работа**
   - Мониторинг состояния каналов
   - Использование соответствующих команд для управления
   - Реализация обработки ошибок

3. **Обслуживание**
   - Регулярные проверки системы
   - Резервное копирование конфигурации
   - Обновление прошивки при наличии
